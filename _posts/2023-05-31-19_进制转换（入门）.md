# 十九、进制转换（入门）

## 1. 概念定义

**进制转换**是人们利用符号来计数的方法。进制转换由一组数码符号和两个基本元素（基数和位权）构成。

我们日常中使用最多的就是十进制。

比如十进制数 1234，表示 $1\times1000+2\times100+3\times10+4\times1$ 。从右往左给 1234 每位数字的位置编号为 i = 0，1，2，3 ，每位的数字表示为 d~i~ ，d~i~ 就是基数；每个位置都反映了一个权值，就是位权，比如十位表示 10，百位表示 100。

### 0）分解各位数字

> 在了解进制转换之前，先学习下如何分解一个数的各位数字。

一般在进行进制转换前，要先将数字的每一位数字提取出来。以十进制数为例，这也是平常最常见的。

十进制数 1234，通过模 10 可以得到数字 4，再通过除以 10 可以得到除了 4 的其他数字（123）；再将 123 通过模 10 得到 3，再除以 10 得到 12，以此类推，最后 1234 变成了 0 ，这时每位数字就提取完毕。

Java代码

```java
public void splitNumber(int[] nums, int num) {  // (1)
    int top = 0;
    while (num != 0) {
        nums[top++] = num % 10;
        num /= 10;
    }
}
```

（1）：nums 数组是用来存放数字 num  的每位数字的。

### 1）X进制 转 十进制

X进制转为十进制后的值是：==每一位上的 数字和它的位权之积 的累加和==。

假设X进制的数从右往左给每一位编号为 i，每一位数字表示为 d~i~ ，每一位的位权表示为 w~i~ ，那么X进制转为十进制的表示为：

​																								$\sum_{i=0}^nd_iw_i$ 。

比如：十六进制数 0x123 = $1\times16^2+2\times16^1+3\times16^0=291$

比如：八进制数 0123 = $1\times8^2+2\times8^1+3\times8^0=83$

比如：二进制数 0b110 = $1\times2^2+1\times2^1+0\times2^0=6$

### 2）十进制 转 X进制

十进制转为X进制后的值是：==倒序取原数模 X 的结果，原数每次要除以 X ，直到原数为 0==。

因为任意一个 X 进制的数都可以表示为：$d_nX^n+...+d_2X^2+d_1X^1+d_0X^0$ ，所以每次除以一个 X 可以得到一个余数，就是最低位上的数字。

比如：十进制数 291 转为十六进制数：

```
291 除 16  ========== 余 3
18 除 16  =========== 余 2
1 除 16  ============ 余 1
```

比如：十进制数 83 转为八进制数：

```
83 除 8 ============ 余 3
10 除 8 ============ 余 2
1 除 8 ============= 余 1
```

比如：十进制数 6 转为二进制数：

```
6 除 2 ============= 余 0
3 除 2 ============= 余 1
1 除 2 ============= 余 1
```

### 3）二进制 转 八进制

二进制转八进制后的结果是：==3 位二进制数转为 1 位八进制数==。

比如：二进制数 11101 转为八进制数：

```
11101   
  ==> 11 101  
  ==> 011 101 
  ==> (35)8
```

### 4）八进制 转 二进制

八进制二进制后的结果是：==1 位八进制数转为 3 位二进制数==。

比如：八进制数 35 转为二进制数：

```
35
  ==> 3   5
  ==> 011 101
  ==> 011101
```

### 5）二进制 转 十六进制

二进制转十六进制后的结果是：==4 位二进制数转为 1 位十六进制数==。

比如：二进制数 110111 转为十六进制数：

```
110111
  ==> 11  0111
  ==> 3   7
  ==> 37
```

### 6）十六进制 转 二进制

十六进制转为二进制后的结果是：==1 位十六进制转为 4 位二进制==。

比如：十六进制数 37 转为二进制数：

```
37
  ==> 3    7
  ==> 0011 0111
  ==> 110111
```

## 2. 题目练习

| 序号 | 题目链接                                                     | 备注                 |
| ---- | ------------------------------------------------------------ | -------------------- |
|      | [二进制中1的个数](https://leetcode-cn.com/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/) | 位运算、统计法       |
|      | [ 各位相加](https://leetcode-cn.com/problems/add-digits/)    | 分解各位数字         |
|      | [ 二进制链表转整数](https://leetcode-cn.com/problems/convert-binary-number-in-a-linked-list-to-integer/) | 二进制转十进制       |
|      | [K 进制表示下的各位数字总和](https://leetcode-cn.com/problems/sum-of-digits-in-base-k/) | 十进制转k进制        |
|      | [ 统计最大组的数目](https://leetcode-cn.com/problems/count-largest-group/) | 分解各位数字、统计法 |
|      | [ 七进制数](https://leetcode-cn.com/problems/base-7/)        | 十进制转七进制       |
|      | [ 数字转换为十六进制数](https://leetcode-cn.com/problems/convert-a-number-to-hexadecimal/) | 十进制转十六进制     |

## 3. 题解报告

[ 七进制数](https://leetcode-cn.com/problems/base-7/)

**题目描述**

> 给定一个整数 `num`，将其转化为 **7 进制**，并以字符串形式输出。

**解题思路**

num 一直模 7，保存结果，直到 num 等于 0 结束，此时保存的结果顺序是从低位到高位，所以需要将顺序逆转。

**Java代码**

```java
class Solution {
    public String convertToBase7(int num) {
        if (num == 0)
            return "0";
        int[] s = new int[10];
        String res = "";
        if (num < 0) {  // (1)
            res += '-';
            num *= -1;
        }
        int top = 0;
        while (num != 0) {
            s[top++] = (num % 7);
            num /= 7;
        }
        for (int i = 0, j = top-1; i < j; i++, j--) {
            int t = s[i];
            s[i] = s[j];
            s[j] = t;
        }
        for (int i = 0; i < top; i++) {
            res += s[i];
        }
        return res;
    }
}
```

（1）：是负数的话将负号保存下来，然后变成正数计算。

[ 数字转换为十六进制数](https://leetcode-cn.com/problems/convert-a-number-to-hexadecimal/)

**题目描述**

> 给定一个整数，编写一个算法将这个数转换为十六进制数。对于负整数，我们通常使用 补码运算 方法。
>
> **注意:**
>
> 1. 十六进制中所有字母(`a-f`)都必须是小写。
> 2. 十六进制字符串中不能包含多余的前导零。如果要转化的数为0，那么以单个字符`'0'`来表示；对于其他情况，十六进制字符串中的第一个字符将不会是0字符。 
> 3. 给定的数确保在32位有符号整数范围内。
> 4. **不能使用任何由库提供的将数字直接转换或格式化为十六进制的方法。**

**解题思路**

4 位二进制转为 1 位十六进制，所以一共需要 8 位十六进制数来表示 32 位的整数。为了不再颠倒顺序，我们可以先计算出整数的高 4 位的和，并转成十六进制，然后再计算下一个 4 位。

为了能先计算高位，我们移动的位数可以用 4 的倍数来控制，要想得到最高的 4 位，那么就需要右移 4\*7 位，然后 &15 就可以得到这最高 4 位。

15 的二进制表示为：1111 。

**Java代码**

```java
class Solution {
    public String toHex(int num) {
        if (num == 0)
            return "0";
        char[] hex = "0123456789abcdef".toCharArray();
        String res = "";
        for (int i = 7; i >= 0; i--) {
            int t = (num >> 4*i) & 15;
            if (res.equals("") && t == 0)
                continue;
            res += hex[t];
        }
        
        return res;
    }
}
```

---

